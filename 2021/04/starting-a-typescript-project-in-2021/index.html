<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Chris Hager"><meta name=description content="This is a guide for starting a TypeScript project in 2021 with modern tooling.

TypeScript 4
Optionally esbuild to bundle for browsers (and Node.js)
Linting with typescript-eslint (tslint is deprecated)
Testing with Jest (and ts-jest)
Publishing a package to npm
Continuous integration (GitHub Actions / GitLab CI)
Automatic API documentation with TypeDoc
"><meta name=keywords content="TypeScript ,esbuild ,Node.js ,browser ,JavaScript ,ES6 ,Project ,Setup ,Template ,Boilerplate"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.metachris.dev/images/posts/typescript-2021.jpg"><meta name=twitter:title content="Starting a TypeScript Project in 2021"><meta name=twitter:description content="This is a guide for starting a TypeScript project in 2021 with modern tooling.

TypeScript 4
Optionally esbuild to bundle for browsers (and Node.js)
Linting with typescript-eslint (tslint is deprecated)
Testing with Jest (and ts-jest)
Publishing a package to npm
Continuous integration (GitHub Actions / GitLab CI)
Automatic API documentation with TypeDoc
"><meta property="og:title" content="Starting a TypeScript Project in 2021"><meta property="og:description" content="This is a guide for starting a TypeScript project in 2021 with modern tooling.

TypeScript 4
Optionally esbuild to bundle for browsers (and Node.js)
Linting with typescript-eslint (tslint is deprecated)
Testing with Jest (and ts-jest)
Publishing a package to npm
Continuous integration (GitHub Actions / GitLab CI)
Automatic API documentation with TypeDoc
"><meta property="og:type" content="article"><meta property="og:url" content="https://www.metachris.dev/2021/04/starting-a-typescript-project-in-2021/"><meta property="og:image" content="https://www.metachris.dev/images/posts/typescript-2021.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-15T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-15T00:00:00+00:00"><base href=https://www.metachris.dev/2021/04/starting-a-typescript-project-in-2021/><title>Starting a TypeScript Project in 2021 Â· Chris Hager
</title><link rel=canonical href=https://www.metachris.dev/2021/04/starting-a-typescript-project-in-2021/><link rel=stylesheet href=https://www.metachris.dev/css/normalize.min.css><link rel=stylesheet href=https://www.metachris.dev/css/coder.min.b264ded956f78952483311122dc15a4f063ddb1a48c781695b2374838257e557.css integrity="sha256-smTe2Vb3iVJIMxESLcFaTwY92xpIx4FpWyN0g4JX5Vc=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.metachris.dev/css/coder-dark.min.47e2bf508bd8d2609f50751fec4e8bea1d7d66645d0a2fb25c4a43f5ecac097b.css integrity="sha256-R+K/UIvY0mCfUHUf7E6L6h19ZmRdCi+yXEpD9eysCXs=" crossorigin=anonymous media=screen><script src=https://www.metachris.dev/js/custom.js></script><link rel=stylesheet href=https://www.metachris.dev/scss/custom.min.24b6b5b956b5503f78b623a3e22f2f942491b071d48413705232bd54da07ad1e.css integrity="sha256-JLa1uVa1UD94tiOj4i8vlCSRsHHUhBNwUjK9VNoHrR4=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-32px.png sizes=32x32><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-16px.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://www.metachris.devindex.xml title="Site Title"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.metachris.dev/>Chris Hager
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg width="20" height="20" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/about/>About</a></li><li class=navigation-item><a id=dark-mode-toggle class=colorscheme-toggle title="Toggle light/dark theme" style=cursor:pointer><span id=theme-icon>ðŸŒ™</span></a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Starting a TypeScript Project in 2021</h1></div><div class=post-meta><div class=date><span class=posted-on><time datetime=2021-04-15T00:00:00Z>April 2021</time></span></div></div></header><div class=single-content><p>This is a guide for starting a TypeScript project in 2021 with modern tooling.</p><ul><li><a href=https://www.typescriptlang.org/>TypeScript 4</a></li><li>Optionally <a href=https://esbuild.github.io/>esbuild</a> to bundle for browsers (and Node.js)</li><li>Linting with <a href=https://github.com/typescript-eslint/typescript-eslint>typescript-eslint</a> (<a href=https://palantir.github.io/tslint/>tslint</a> is deprecated)</li><li>Testing with <a href=https://jestjs.io/docs/getting-started>Jest</a> (and <a href=https://www.npmjs.com/package/ts-jest>ts-jest</a>)</li><li>Publishing a package to npm</li><li>Continuous integration (<a href=https://docs.github.com/en/actions>GitHub Actions</a> / <a href=https://docs.gitlab.com/ee/ci/>GitLab CI</a>)</li><li>Automatic API documentation with <a href=https://typedoc.org/guides/doccomments/>TypeDoc</a></li></ul><div class=infobox1><p>You can use the <a href=https://github.com/metachris/typescript-boilerplate>example repository</a> (instead of the manual setup in this guide):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/metachris/typescript-boilerplate.git
</span></span></code></pre></div></div><hr><h1 id=contents>Contents</h1><aside><nav id=TableOfContents><ul><li><a href=#basic-project-setup>Basic project setup</a></li><li><a href=#tests-with-jest>Tests with Jest</a></li><li><a href=#esbuild>esbuild</a><ul><li><a href=#bundling-for-nodejs>Bundling for Node.js</a></li><li><a href=#building-a-browser-compatible-module>Building a browser-compatible module</a></li></ul></li><li><a href=#publishing-to-npm>Publishing to npm</a><ul><li><a href=#using-from-nodejs>Using from Node.js</a></li><li><a href=#using-from-the-browser>Using from the browser</a></li></ul></li><li><a href=#continuous-integration>Continuous integration</a><ul><li><a href=#github-actions>GitHub Actions</a></li><li><a href=#gitlab-ci>GitLab CI</a></li></ul></li><li><a href=#api-documentation-with-typedoc>API documentation with TypeDoc</a></li><li><a href=#summary>Summary</a></li><li><a href=#references>References</a></li><li><a href=#notes>Notes</a></li></ul></nav></aside><hr><h2 id=basic-project-setup>Basic project setup</h2><p>The basic setup consists of four steps:</p><ol><li>Create the project and source directories</li><li>Create a <code>package.json</code></li><li>Get a <a href=https://github.com/metachris/typescript-boilerplate/blob/master/.gitignore><code>.gitignore</code></a>, <a href=https://github.com/metachris/typescript-boilerplate/blob/master/tsconfig.json><code>tsconfig.json</code></a>, <a href=https://github.com/metachris/typescript-boilerplate/blob/master/.eslintrc.js><code>.eslintrc.js</code></a></li><li>Install TypeScript & dependencies</li></ol><p>Note: This guide uses <code>yarn</code>, but if you prefer <code>npm</code> it has similar commands.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create project folder</span>
</span></span><span style=display:flex><span>mkdir my-project
</span></span><span style=display:flex><span>cd my-project
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create source folder and files</span>
</span></span><span style=display:flex><span>mkdir src
</span></span><span style=display:flex><span>touch src/main.ts src/main.test.ts src/cli.ts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a package.json</span>
</span></span><span style=display:flex><span>yarn init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install TypeScript, linter and Jest</span>
</span></span><span style=display:flex><span>yarn add -D typescript @types/node ts-node
</span></span><span style=display:flex><span>yarn add -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
</span></span><span style=display:flex><span>yarn add -D jest ts-jest @types/jest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get a .gitignore</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/.gitignore
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get a tsconfig.json with some defaults (adapt as needed)</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/tsconfig.json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Alternatively you can create a fresh tsconfig.json (with extensive docstrings)</span>
</span></span><span style=display:flex><span>tsc --init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get a .eslintrc.js</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/.eslintrc.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get a jest.config.json, for ts-jest to run the tests without a separate typescript compile step</span>
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/metachris/typescript-boilerplate/master/jest.config.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a git repo and make the first commit</span>
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git commit -am <span style=color:#e6db74>&#34;initial commit&#34;</span>
</span></span></code></pre></div><div class=infobox1><p>Use <code>src/cli.ts</code> for code that&rsquo;s run from the command line. This way code from <code>main.ts</code> can be included without running the entrypoint code, and allows for easier cross-target building and code branches (eg. Node.js and browsers).</p></div><p>Add <code>scripts</code> to your <code>package.json</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;scripts&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;cli&#34;</span>: <span style=color:#e6db74>&#34;ts-node src/cli.ts&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;jest&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lint&#34;</span>: <span style=color:#e6db74>&#34;eslint src/ --ext .js,.jsx,.ts,.tsx&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;tsc -p tsconfig.json&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;clean&#34;</span>: <span style=color:#e6db74>&#34;rm -rf dist build&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;ts-node&#34;</span>: <span style=color:#e6db74>&#34;ts-node&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now you can run <code>yarn cli</code>, <code>yarn test</code>, <code>yarn lint</code>, <code>yarn build</code> and <code>yarn ts-node &lt;filename></code>.</p><div class=infobox1><p>&#x1f4a1; In Visual Studio Code you can use the build and test tasks to start scripts with keyboard shortcuts. In the command palette &ldquo;<em>Configure Default Build Task</em>&rdquo; and &ldquo;<em>Configure Default Test Task</em>&rdquo; (see the <a href=https://code.visualstudio.com/docs/editor/tasks>VS Code docs</a>).</p></div><hr><h2 id=tests-with-jest>Tests with Jest</h2><p>You can write <a href=https://jestjs.io/docs/getting-started>Jest tests</a> <a href=https://github.com/metachris/typescript-boilerplate/blob/master/src/main.test.ts>like this</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>greet</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./main&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;the data is peanut butter&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>expect</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;greeting&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>greet</span>(<span style=color:#e6db74>&#39;Foo&#39;</span>)).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;Hello Foo&#39;</span>)
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Run the tests with <code>yarn test</code>, no separate compile step is necessary.</p><ul><li>See also the <a href=https://jestjs.io/docs/getting-started>Jest documentation</a></li><li>Take a look at other modern test runners such as <a href=https://github.com/avajs/ava>ava</a>, <a href=https://github.com/lukeed/uvu>uvu</a> and <a href=https://github.com/substack/tape>tape</a></li></ul><hr><h2 id=esbuild>esbuild</h2><p><a href=https://esbuild.github.io/>esbuild</a> is an extremely fast JavaScript bundler that
can also compile a <a href=https://esbuild.github.io/content-types/#typescript>large subset of TypeScript code</a>. You can use it to bundle both for Node.js
as well as for browsers. esbuild is still relatively young and under active / heavy development; see also <a href=https://github.com/evanw/esbuild>esbuild on GitHub</a>.</p><p>Why use <code>esbuild</code> in addition to <code>tsc</code>? The TypeScript compiler doesn&rsquo;t bundle well for browsers (developers usually resort to additional bundlers like webpack, parcel or rollup), and it&rsquo;s pretty slow.</p><p><strong>Install esbuild:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add -D esbuild
</span></span></code></pre></div><h3 id=bundling-for-nodejs>Bundling for Node.js</h3><p>Additionally to <code>tsc</code> (the TypeScript compiler), you can also bundle code with <code>esbuild</code> for Node.js like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Compile and bundle</span>
</span></span><span style=display:flex><span>yarn esbuild src/cli.ts --bundle --platform<span style=color:#f92672>=</span>node --outfile<span style=color:#f92672>=</span>dist/esbuild/cli.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Same, but minify and sourcemaps</span>
</span></span><span style=display:flex><span>yarn esbuild src/cli.ts --bundle --platform<span style=color:#f92672>=</span>node --minify --sourcemap<span style=color:#f92672>=</span>external --outfile<span style=color:#f92672>=</span>dist/esbuild/cli.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run the bundled output</span>
</span></span><span style=display:flex><span>node dist/esbuild/cli.js
</span></span></code></pre></div><p>Read more about the esbuild options in the <a href=https://esbuild.github.io/getting-started/>esbuild documentation</a>.</p><p>Notes:</p><ul><li>When building with esbuild, you can use the <a href=https://esbuild.github.io/api/#watch><code>--watch</code> option</a> to rebuild whenever a file changed</li><li><code>esbuild</code> does currently not support building <code>.d.ts</code> declaration files (see also <a href=https://github.com/evanw/esbuild/issues/95>this issue</a>). You need to build those with <code>tsc</code>.</li><li>The example repository includes the <code>esbuild</code> commands as <a href=https://github.com/metachris/typescript-boilerplate/blob/master/package.json>scripts in package.json</a></li></ul><h3 id=building-a-browser-compatible-module>Building a browser-compatible module</h3><p>You can generate browser compatible modules with bundlers such as <a href=https://esbuild.github.io/>esbuild</a>, <a href=https://webpack.js.org/>webpack</a>, <a href=https://parceljs.org/>parcel</a> and others.</p><p>This guide uses <code>esbuild</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Bundle for browsers</span>
</span></span><span style=display:flex><span>yarn esbuild src/browser.ts --bundle --outfile<span style=color:#f92672>=</span>dist/esbuild/browser.js
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Same, but with minification and sourcemaps</span>
</span></span><span style=display:flex><span>yarn esbuild src/browser.ts --bundle --minify --sourcemap<span style=color:#f92672>=</span>external --outfile<span style=color:#f92672>=</span>dist/esbuild/browser.js
</span></span></code></pre></div><p>The code in <code>browser.ts</code> will be executed once loaded in the browser.</p><div class=infobox1><p>esbuild has a <code>--global-name=xyz</code> flag, to store the exports from the entry point in a global variable. See also the <a href=https://esbuild.github.io/api/#global-name>esbuild &ldquo;Global name&rdquo; docs</a>.</p></div><h6 id=accessing-dom-properties-window-document>Accessing DOM properties (<code>window</code>, <code>document</code>)</h6><p>You can access <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window><code>window</code></a> and <a href=https://developer.mozilla.org/en-US/docs/Web/API/Document><code>document</code></a> in your code when loaded in a browser. You might want to use this to attach parts of your code to the <code>window</code> object.</p><p>In <code>tsconfig.json</code>, add <code>DOM</code> to the <a href=https://www.typescriptlang.org/tsconfig#lib>list of libraries</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#e6db74>&#34;lib&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;ES6&#34;</span>, <span style=color:#e6db74>&#34;DOM&#34;</span>]
</span></span></code></pre></div><p>Create <code>src/browser.ts</code> as entrypoint for browser builds. There you can attach custom properties to <code>window</code> like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Import a function
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>greet</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./main&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Make it accessible on the window object
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>(window <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>any</span>).<span style=color:#a6e22e>greet</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>greet</span>
</span></span></code></pre></div><p>Now bundle with <code>esbuild</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn esbuild src/browser.ts --bundle --outfile<span style=color:#f92672>=</span>dist/esbuild/browser.js
</span></span></code></pre></div><p>Test the result with a simple website like this: <a href=https://github.com/metachris/typescript-boilerplate/blob/master/browser-test.html><code>browser-test.html</code></a></p><div class=infobox1><ul><li>The example repository includes the <code>esbuild</code> commands as <a href=https://github.com/metachris/typescript-boilerplate/blob/master/package.json>scripts in package.json</a></li><li>If you prefer to use <a href=https://webpack.js.org/>webpack</a>, take a look at this <a href=https://github.com/metachris/micropython-ctl/blob/master/webpack.config.js>webpack.config.js</a> for inspiration</li><li>Rather than casting <code>window</code> to <code>any</code>, you might want to properly extend the <code>Window</code> interface (<a href=https://stackoverflow.com/a/43513740/5433572>see here</a>)</li></ul></div><hr><h2 id=publishing-to-npm>Publishing to npm</h2><p>Let&rsquo;s publish the latest code to npm, for use with both Node.js and the browser.</p><div class=infobox1><p>npm and yarn ignore the files from <code>.gitignore</code>. Since <code>dist</code> is in there, we need to overwrite the npm ignore settings
using a custom <code>.npmignore</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>wget https://raw.githubusercontent.com/metachris/micropython-ctl/master/.npmignore
</span></span></code></pre></div></div><p>Create a build and run <code>yarn publish</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Build with tsc and esbuild</span>
</span></span><span style=display:flex><span>yarn build-all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update the version and publish to npm</span>
</span></span><span style=display:flex><span>yarn publish
</span></span></code></pre></div><p><code>build-all</code> builds the project with both <code>tsc</code> to get the type definiton files, and <code>esbuild</code> to build for Node.js and browsers.</p><p>After running <a href=https://classic.yarnpkg.com/en/docs/cli/publish/><code>yarn publish</code></a> the project/new version is live on npm. &#x1f389;</p><p>For example the npm package for this boilerplate project:</p><ul><li><a href=https://www.npmjs.com/package/typescript-boilerplate-2021>https://www.npmjs.com/package/typescript-boilerplate-2021</a></li></ul><hr><h3 id=using-from-nodejs>Using from Node.js</h3><p>You can install the module with npm:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install typescript-boilerplate-2021
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># or with yarn</span>
</span></span><span style=display:flex><span>yarn add typescript-boilerplate-2021
</span></span></code></pre></div><p>Using the module in custom code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>greet</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;typescript-boilerplate-2021&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>greet</span>(<span style=color:#e6db74>&#34;World&#34;</span>)
</span></span></code></pre></div><hr><h3 id=using-from-the-browser>Using from the browser</h3><p>There are several CDNs which automatically deliver npm projects, like <a href=https://www.jsdelivr.com/>jsDelivr</a>, <a href=https://cdnjs.com/>cdnjs</a>, <a href=https://unpkg.com/>unpkg.com</a> or <a href=https://www.skypack.dev/>skypack</a>.</p><p>Without any manual intervention, you can access packages on jsDelivr like this:</p><ul><li><a href=https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021>https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021</a></li><li><a href=https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021/>https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021/</a></li><li><a href=https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0>https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0</a></li><li><a href=https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0/package.json>https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0/package.json</a></li><li><a href=https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0/dist/esbuild/browser.js>https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0/dist/esbuild/browser.js</a></li></ul><p>You can reference the bundle from HTML like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.jsdelivr.net/npm/typescript-boilerplate-2021@0.3.0&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><p>Test the result with a simple website like this: <a href=https://github.com/metachris/typescript-boilerplate/blob/master/browser-test.html><code>browser-test.html</code></a></p><hr><h2 id=continuous-integration>Continuous integration</h2><p>You probably want to run the tests and linter on every code push. Additionaly you might want to build and deploy the docs from CI too.</p><h3 id=github-actions>GitHub Actions</h3><p>See <a href=https://docs.github.com/en/actions>GitHub Actions docs</a>. Create a file <code>.github/workflows/lint-and-test.yml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Lint and test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>: [<span style=color:#ae81ff>push, pull_request]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lint_and_test</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>fail-fast</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>nodejs</span>: [<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>14</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># https://github.com/actions/setup-node</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v2-beta</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>node-version</span>: <span style=color:#ae81ff>${{ matrix.nodejs }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>yarn install</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>yarn test</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>yarn lint</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>yarn build-all</span>
</span></span></code></pre></div><br><p><strong>Testing in multiple operating systems</strong></p><p>If you want to verify your build / package on various operating systems (Windows, Linux, macOS), you can setup a matrix for a job like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>default-version</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>${{ matrix.os }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>fail-fast</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>os</span>: [<span style=color:#ae81ff>macos-latest, windows-latest, ubuntu-latest]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v2-beta</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>node-version</span>: <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>...</span>
</span></span></code></pre></div><h3 id=gitlab-ci>GitLab CI</h3><p>See <a href=https://docs.gitlab.com/ee/ci/>GitLab CI docs</a>. Create a file <code>.gitlab-ci.yml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>image</span>: <span style=color:#ae81ff>node:12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>cache</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>node_modules/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>stages</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>lint-and-test</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>stage</span>: <span style=color:#ae81ff>test</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>yarn install</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>yarn test</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>yarn lint</span>
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>yarn build-all</span>
</span></span></code></pre></div><hr><h2 id=api-documentation-with-typedoc>API documentation with TypeDoc</h2><p>You can auto-generate API documentation from the TypeScript source files using <a href=https://typedoc.org/guides/doccomments/>TypeDoc</a>, which builds on JSDoc syntax. The generated documentation can be published to GitHub / GitLab pages through the CI.</p><ul><li>Install <a href=https://typedoc.org/guides/doccomments/>TypeDoc</a>: <code>yarn add -D typedoc</code></li><li>Add <code>docs</code> script to <code>package.json</code>: <code>"typedoc --entryPoints src/main.ts"</code></li></ul><p>Documentation strings look like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * This comment _supports_ [Markdown](https://marked.js.org/)
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DocumentMe</span> {}
</span></span></code></pre></div><p>Generate the documentation with <code>yarn docs</code>. The resulting HTML is saved in <code>docs/</code>.</p><p>You can use CI to automatically publish the docs to GitHub or GitLab pages:</p><ul><li><a href=https://pages.github.com/>GitHub pages</a>: <a href=https://github.com/metachris/typescript-boilerplate/blob/master/.github/workflows/deploy-gh-pages.yml><code>.github/workflows/deploy-gh-pages.yml</code></a></li><li><a href=https://docs.gitlab.com/ee/user/project/pages/>GitLab pages</a>: <a href=https://github.com/metachris/typescript-boilerplate/blob/master/.gitlab-ci.yml><code>.gitlab-ci.yml</code></a></li></ul><p>For example this the documentation for the example project: <a href=https://metachris.github.io/typescript-boilerplate/>https://metachris.github.io/typescript-boilerplate/</a></p><hr><h2 id=summary>Summary</h2><p>This post covered a full TypeScript project setup, with tests, esbuild, bundling for Node.js and browsers,
publishing on npm, continuous integration and automatic documentation.</p><div class=infobox1><p>You can use the <a href=https://github.com/metachris/typescript-boilerplate>boilerplate repository</a> like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/metachris/typescript-boilerplate.git
</span></span><span style=display:flex><span>cd typescript-boilerplate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>yarn install
</span></span><span style=display:flex><span>yarn test
</span></span><span style=display:flex><span>yarn lint
</span></span><span style=display:flex><span>yarn build-all
</span></span></code></pre></div></div><hr><h2 id=references>References</h2><ul><li><a href=https://github.com/metachris/typescript-boilerplate>Example repository</a></li><li><a href=https://www.typescriptlang.org/docs/handbook/intro.html>TypeScript Handbook</a></li><li><a href=https://www.typescriptlang.org/tsconfig>tsconfig docs</a></li><li><a href=https://esbuild.github.io/>esbuild docs</a></li><li><a href=https://github.com/typescript-eslint/typescript-eslint/blob/master/docs/getting-started/linting/README.md>typescript-eslint docs</a></li><li><a href=https://jestjs.io/docs/getting-started>Jest docs</a></li><li><a href=https://docs.github.com/en/actions>GitHub Actions</a>, <a href=https://docs.gitlab.com/ee/ci/>GitLab CI</a></li><li>Alternative tools and honorable mentions:<ul><li>Test runners: <a href=https://github.com/avajs/ava>ava</a>, <a href=https://github.com/lukeed/uvu>uvu</a>, <a href=https://github.com/substack/tape>tape</a>, <a href=https://mochajs.org/>Mocha</a></li><li>Bundlers: <a href=https://webpack.js.org/>webpack</a>, <a href=https://parceljs.org/>Parcel</a>, <a href=https://www.rollupjs.org/>rollup.js</a>, <a href=https://www.snowpack.dev/>snowpack</a></li></ul></li></ul><hr><h2 id=notes>Notes</h2><ul><li>You might be interested in using <a href=https://deno.land/>Deno</a> instead of Node.js. Deno is a modern V8 runtime with a lot of great features, created by <a href="https://www.youtube.com/watch?v=M3BM9TB-8yA">Ryan Dahl, author of Node.js</a>. It&rsquo;s still somewhat new and experimental though.</li><li>To bootstrap a full web project, you might want to use <strong>hot module replacement</strong> (HMR). This is outside the scope of this post. In the meantime, see the <a href=https://webpack.js.org/guides/hot-module-replacement/>webpack docs</a> and <a href=https://parceljs.org/hmr.html>parcel docs</a> about HMR.</li><li>If you want to target both Node.js and browsers, be aware that several APIs are different, most notably <code>fetch</code>, <code>WebSocket</code>, <code>Buffer</code>.</li><li>See also <a href=https://github.com/formium/tsdx>https://github.com/formium/tsdx</a> for a more fully featured TypeScript project boilerplate</li></ul><hr><p>Reach out with feedback and ideas:</p><ul><li><a href=https://twitter.com/metachris>twitter.com/metachris</a></li><li><a href=https://github.com/metachris/typescript-boilerplate/issues>github.com/metachris/typescript-boilerplate/issues</a></li><li>Leave a comment below &#x1f447;</li></ul><p>Join the <a href="https://news.ycombinator.com/item?id=26888455">discussion of this post on Hacker News</a>.</p></div><hr><div class=subscribe-form><p>Enjoyed this post? Subscribe to get notified about new articles.</p><form action=https://buttondown.com/api/emails/embed-subscribe/metachris method=post target=_blank><input type=hidden name=tag value=metachris.dev/post>
<input type=email name=email placeholder=your@email.com required>
<button type=submit>Subscribe</button></form></div><hr><div style=float:right><div class=tags><svg width="16" height="16" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true" style="display:inline-block;vertical-align:text-bottom"><path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414.0l-7-7A.997.997.0 012 10V5a3 3 0 013-3h5c.256.0.512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/></svg><a href=https://www.metachris.dev/tags/typescript/>TypeScript</a>
<span class=separator>â€¢</span>
<a href=https://www.metachris.dev/tags/webdev/>WebDev</a></div></div><div style=clear:both></div><div class=bottom-post-links><div class=prev><span class=title>PREVIOUS POST</span><br><a href=https://www.metachris.dev/2021/04/pdfx-update-and-new-version-release-v1.4.1/>PDFx update and new version release (v1.4.1)</a></div><div class=next><span class=title>NEXT POST</span><br><a href=https://www.metachris.dev/2021/05/creating-go-bindings-for-ethereum-smart-contracts/>Creating Go Bindings for Ethereum Smart Contracts</a></div></div><hr><footer><a id=comments></a><h2>Comments</h2><script src=https://utteranc.es/client.js repo=metachris/metachris.dev-comments issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script></footer></article></section></div><footer class=footer><section class=container></section></footer></main><script src=https://www.metachris.dev/js/dark-mode.min.6948493aa1da5fe4e63b34961a67cde1361353b72c9e2d61f024a34872147559.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=5434b4c9-8ffe-4321-ad55-33012bbb5e73></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168016633-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-168016633-1")</script></body></html>