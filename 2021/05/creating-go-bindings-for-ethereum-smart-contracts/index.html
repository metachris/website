<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Chris Hager"><meta name=description content="














    
    
      
      
      
    
    
    
    
      
      
      
      
      
      
      
      
      
        
          
            
          
        
      
    
    
      
    
    
    
    
    
    
      
    
    
    


To interact with Ethereum smart contracts in Go programs, you need bindings for the specific type of contract.
This post is a quick guide for generating these bindings from various sources:

Manually compiled Solidity contract
Smart contracts with Truffle (eg. OpenZeppelin contracts)
Compiling a contract on remix.ethereum.org
Using the Etherscan ABI API
Prebuilt Go bindings
"><meta name=keywords content="Ethereum ,Go ,Smart Contracts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.metachris.dev/images/posts/eth-go/logo.jpg"><meta name=twitter:title content="Creating Go Bindings for Ethereum Smart Contracts"><meta name=twitter:description content="














    
    
      
      
      
    
    
    
    
      
      
      
      
      
      
      
      
      
        
          
            
          
        
      
    
    
      
    
    
    
    
    
    
      
    
    
    


To interact with Ethereum smart contracts in Go programs, you need bindings for the specific type of contract.
This post is a quick guide for generating these bindings from various sources:

Manually compiled Solidity contract
Smart contracts with Truffle (eg. OpenZeppelin contracts)
Compiling a contract on remix.ethereum.org
Using the Etherscan ABI API
Prebuilt Go bindings
"><meta property="og:title" content="Creating Go Bindings for Ethereum Smart Contracts"><meta property="og:description" content="














    
    
      
      
      
    
    
    
    
      
      
      
      
      
      
      
      
      
        
          
            
          
        
      
    
    
      
    
    
    
    
    
    
      
    
    
    


To interact with Ethereum smart contracts in Go programs, you need bindings for the specific type of contract.
This post is a quick guide for generating these bindings from various sources:

Manually compiled Solidity contract
Smart contracts with Truffle (eg. OpenZeppelin contracts)
Compiling a contract on remix.ethereum.org
Using the Etherscan ABI API
Prebuilt Go bindings
"><meta property="og:type" content="article"><meta property="og:url" content="https://www.metachris.dev/2021/05/creating-go-bindings-for-ethereum-smart-contracts/"><meta property="og:image" content="https://www.metachris.dev/images/posts/eth-go/logo.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-05-30T00:00:00+00:00"><base href=https://www.metachris.dev/2021/05/creating-go-bindings-for-ethereum-smart-contracts/><title>Creating Go Bindings for Ethereum Smart Contracts Â· Chris Hager
</title><link rel=canonical href=https://www.metachris.dev/2021/05/creating-go-bindings-for-ethereum-smart-contracts/><link rel=stylesheet href=https://www.metachris.dev/css/normalize.min.css><link rel=stylesheet href=https://www.metachris.dev/css/coder.min.b264ded956f78952483311122dc15a4f063ddb1a48c781695b2374838257e557.css integrity="sha256-smTe2Vb3iVJIMxESLcFaTwY92xpIx4FpWyN0g4JX5Vc=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.metachris.dev/css/coder-dark.min.47e2bf508bd8d2609f50751fec4e8bea1d7d66645d0a2fb25c4a43f5ecac097b.css integrity="sha256-R+K/UIvY0mCfUHUf7E6L6h19ZmRdCi+yXEpD9eysCXs=" crossorigin=anonymous media=screen><script src=https://www.metachris.dev/js/custom.js></script><link rel=stylesheet href=https://www.metachris.dev/scss/custom.min.24a33b44439d788a439cc1aecae08f3b66e911983ab234f3225984ea5be53ba2.css integrity="sha256-JKM7REOdeIpDnMGuyuCPO2bpEZg6sjTzIlmE6lvlO6I=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-32px.png sizes=32x32><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-16px.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://www.metachris.devindex.xml title="Site Title"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.metachris.dev/>Chris Hager
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg width="20" height="20" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/about/>About</a></li><li class=navigation-item><a id=dark-mode-toggle class=colorscheme-toggle title="Toggle light/dark theme" style=cursor:pointer><span id=theme-icon>ðŸŒ™</span></a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Creating Go Bindings for Ethereum Smart Contracts</h1></div><div class=post-meta><div class=date><span class=posted-on><time datetime=2021-05-30T00:00:00Z>May 2021</time></span></div></div></header><div class=single-content><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://www.metachris.dev/js/load-photoswipe.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin=anonymous></script><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><p>To interact with Ethereum smart contracts in Go programs, you need bindings for the specific type of contract.
This post is a quick guide for generating these bindings from various sources:</p><ol><li>Manually compiled Solidity contract</li><li>Smart contracts with Truffle (eg. <a href=https://openzeppelin.com/contracts/>OpenZeppelin contracts</a>)</li><li>Compiling a contract on <a href=http://remix.ethereum.org/>remix.ethereum.org</a></li><li>Using the Etherscan ABI API</li><li>Prebuilt Go bindings</li></ol><hr><h2>Contents</h2><aside><nav id=TableOfContents><ul><li><a href=#application-binary-interface-abi>Application Binary Interface (ABI)</a></li><li><a href=#the-abigen-tool>The <code>abigen</code> tool</a></li><li><a href=#manually-compiled-solidity-contract>Manually compiled Solidity contract</a></li><li><a href=#smart-contracts-with-truffle>Smart contracts with Truffle</a></li><li><a href=#compiling-a-contract-on-remixethereumorg>Compiling a contract on remix.ethereum.org</a></li><li><a href=#getting-the-abi-from-etherscan>Getting the ABI from Etherscan</a></li><li><a href=#prebuilt-go-bindings>Prebuilt Go bindings</a></li><li><a href=#using-the-go-bindings>Using the Go bindings</a></li><li><a href=#references>References</a></li></ul></nav></aside><hr><center><link rel=stylesheet href=https://www.metachris.dev/css/hugo-easy-gallery.css><div class=box style=max-width:60%><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/eth-go/logo-trim.png alt="Project logo - Gopher and Ethereum logos"></div><a href=https://www.metachris.dev/images/posts/eth-go/logo-trim.png itemprop=contentUrl></a></figure></div></center><hr><h2 id=application-binary-interface-abi>Application Binary Interface (ABI)</h2><p>The <a href=https://docs.soliditylang.org/en/develop/abi-spec.html>Application Binary Interface (ABI)</a> of a smart contract describes how you call its functions and what kind of data you get back. The Go bindings are generated from such an ABI.</p><blockquote><p>The Contract Application Binary Interface (ABI) is the standard way to interact with contracts in the Ethereum ecosystem, both from outside the blockchain and for contract-to-contract interaction. Data is encoded according to its type, as described in this specification. The encoding is not self describing and thus requires a schema in order to decode.</p></blockquote><p>The ABI usually has the form of a JSON file which can be generated from the smart contract source code. Take a look at <a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-abi>this example ABI JSON</a>. The following sections explain how to create (or get) the ABI from various forms of smart contracts, and to generate Go bindings from it.</p><hr><h2 id=the-abigen-tool>The <code>abigen</code> tool</h2><p><a href=https://geth.ethereum.org/docs/dapp/native-bindings><code>abigen</code></a> is used to generate the Go bindings from an ABI JSON file, and is part of <a href=https://github.com/ethereum/go-ethereum>go-ethereum</a>. Make sure you have the latest version of it!</p><p>You can build, install and run <code>abigen</code> like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Download go-ethereum, build and install the devtools (which includes abigen)</span>
</span></span><span style=display:flex><span>git clone https://github.com/ethereum/go-ethereum.git
</span></span><span style=display:flex><span>cd go-ethereum
</span></span><span style=display:flex><span>make devtools
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run abigen and print the version</span>
</span></span><span style=display:flex><span>abigen -version
</span></span><span style=display:flex><span>abigen -help
</span></span></code></pre></div><p>Examples for how to generate Go bindings with <code>abigen</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create Go bindings from an ABI file (without bytecode)</span>
</span></span><span style=display:flex><span>abigen --abi &lt;input-file.abi&gt; --pkg &lt;go-package-name&gt; --out &lt;output-file.go&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create Go bindings from an ABI + BIN file (with bytecode)</span>
</span></span><span style=display:flex><span>abigen --abi &lt;input-file.abi&gt; --bin &lt;input-file.bin&gt; --pkg &lt;go-package-name&gt; --out &lt;output-file.go&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create Go bindings from a Solidity source file (with bytecode)</span>
</span></span><span style=display:flex><span>abigen --sol &lt;input-file.sol&gt; --pkg &lt;go-package-name&gt; --out &lt;output-file.go&gt;
</span></span></code></pre></div><p>See also:</p><ul><li><a href=https://geth.ethereum.org/docs/dapp/native-bindings>https://geth.ethereum.org/docs/dapp/native-bindings</a></li><li><a href=https://github.com/ethereum/go-ethereum>https://github.com/ethereum/go-ethereum</a></li></ul><hr><h2 id=manually-compiled-solidity-contract>Manually compiled Solidity contract</h2><p>If you have a smart contract with full Solidity source code (eg. <a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-sol><code>Store.sol</code></a>), you can compile it with <code>solc</code> and generate the bindings like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the ABI (writes a file called build/Store.abi)</span>
</span></span><span style=display:flex><span>solc --abi Store.sol -o build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Generate the Go bindings (without bytecode)</span>
</span></span><span style=display:flex><span>abigen --abi build/Store.abi --pkg store --out store.go
</span></span></code></pre></div><p>If you want to include the contract bytecode (needed to deploy the contract):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create ABI and bytecode</span>
</span></span><span style=display:flex><span>solc --abi Store.sol -o build
</span></span><span style=display:flex><span>solc --bin Store.sol -o build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Generate the Go bindings (with bytecode)</span>
</span></span><span style=display:flex><span>abigen --abi build/Store.abi --bin build/Store.bin --pkg store --out store.go
</span></span></code></pre></div><p><code>abigen</code> can also generate the bindings with bytecode automatically in one command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>abigen --sol Store.sol --pkg store --out store.go
</span></span></code></pre></div><hr><h2 id=smart-contracts-with-truffle>Smart contracts with Truffle</h2><p><a href=https://www.trufflesuite.com/docs/truffle/overview>Truffle</a> is a popular Ethereum smart contract development toolkit.
It is often paired with <a href=https://www.trufflesuite.com/ganache>Ganache</a> - a tool to run local Ethereum blockchains for development.
<a href=https://www.trufflesuite.com/docs/truffle/quickstart>Truffle quickstart docs</a> offer a brief introduction into the whole
workflow.</p><p>Let&rsquo;s create a minimal <a href=https://eips.ethereum.org/EIPS/eip-721>ERC721 (NFT) smart contract</a> based on the <a href=https://docs.openzeppelin.com/contracts/4.x/erc721>OpenZeppelin ERC721 contract</a>.</p><p><strong>Step 1</strong>: Setup the project and install dependencies (Truffle, <a href=https://github.com/OpenZeppelin/openzeppelin-contracts>OpenZeppelin contracts</a> and <a href=https://www.npmjs.com/package/@chainsafe/truffle-plugin-abigen>@chainsafe/truffle-plugin-abigen</a>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the project directory</span>
</span></span><span style=display:flex><span>mkdir mynft <span style=color:#f92672>&amp;&amp;</span> cd mynft
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install dependencies</span>
</span></span><span style=display:flex><span>yarn init -y
</span></span><span style=display:flex><span>yarn add truffle @openzeppelin/contracts @chainsafe/truffle-plugin-abigen
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Run the Truffle project setup (creates the folder structure)</span>
</span></span><span style=display:flex><span>yarn truffle init
</span></span></code></pre></div><p><strong>Step 2</strong>: Create the NFT721 smart contract (<code>contracts/MyNFT.sol</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>^</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>8</span>.<span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;@openzeppelin/contracts/token/ERC721/ERC721.sol&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>contract</span> <span style=color:#a6e22e>MyNFT</span> <span style=color:#66d9ef>is</span> ERC721 {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>constructor</span>() ERC721(<span style=color:#e6db74>&#34;MyNFT&#34;</span>, <span style=color:#e6db74>&#34;MNFT&#34;</span>) {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Step 3</strong>: Edit <code>truffle-config.json</code> to set the Solidity compiler version and adding the abigen pugin:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;@chainsafe/truffle-plugin-abigen&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>compilers</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>solc</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>version</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;0.8.4&#34;</span>,    <span style=color:#75715e>// Fetch exact version from solc-bin (default: truffle&#39;s version)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Step 4</strong>: Compile the contract and ABI and build the Go interface</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Compile the contract</span>
</span></span><span style=display:flex><span>$ yarn truffle compile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Compiling your contracts...
</span></span><span style=display:flex><span><span style=color:#f92672>===========================</span>
</span></span><span style=display:flex><span>&gt; Compiling ./contracts/Migrations.sol
</span></span><span style=display:flex><span>&gt; Compiling ./contracts/MyNFT.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/token/ERC721/ERC721.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/token/ERC721/IERC721.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/token/ERC721/IERC721Receiver.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/token/ERC721/extensions/IERC721Metadata.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/utils/Address.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/utils/Context.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/utils/Strings.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/utils/introspection/ERC165.sol
</span></span><span style=display:flex><span>&gt; Compiling @openzeppelin/contracts/utils/introspection/IERC165.sol
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; Artifacts written to build/contracts
</span></span><span style=display:flex><span>&gt; Compiled successfully using:
</span></span><span style=display:flex><span>   - solc: 0.8.4+commit.c7e474f2.Emscripten.clang
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Generate the ABI and BIN files (stored in abigenBindings/)</span>
</span></span><span style=display:flex><span>$ yarn truffle run abigen MyNFT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create the Go binding with bytecode (~61K)</span>
</span></span><span style=display:flex><span>$ abigen --bin<span style=color:#f92672>=</span>abigenBindings/bin/MyNFT.bin --abi<span style=color:#f92672>=</span>abigenBindings/abi/MyNFT.abi --pkg<span style=color:#f92672>=</span>mynft --out<span style=color:#f92672>=</span>mynft.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Alternatively, create the Go binding without the bytecode (~42K)</span>
</span></span><span style=display:flex><span>$ abigen --abi<span style=color:#f92672>=</span>abigenBindings/abi/MyNFT.abi --pkg<span style=color:#f92672>=</span>mynft --out<span style=color:#f92672>=</span>mynft.go
</span></span></code></pre></div><hr><h2 id=compiling-a-contract-on-remixethereumorg>Compiling a contract on remix.ethereum.org</h2><p>You can use <a href=http://remix.ethereum.org>remix.ethereum.org</a> to compile smart contracts
and download the ABI file like this:</p><style>.gallery .box{margin:0 20px}</style><div class="gallery caption-position-bottom caption-effect-slide hover-effect-zoom hover-transition" itemscope itemtype=http://schema.org/ImageGallery><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/images/posts/eth-go/remix1.png)><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/eth-go/remix1.png alt="Compile the contract"></div><a href=https://www.metachris.dev/images/posts/eth-go/remix1.png itemprop=contentUrl></a><figcaption><p>Compile the contract</p></figcaption></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img style=background-image:url(/images/posts/eth-go/remix2.png)><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/eth-go/remix2.png alt="Get the ABI"></div><a href=https://www.metachris.dev/images/posts/eth-go/remix2.png itemprop=contentUrl></a><figcaption><p>Get the ABI</p></figcaption></figure></div></div><p>Save the copied ABI into a file called <code>store.abi</code> and create the Go bindings with <code>abigen</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>abigen --abi store.abi --pkg store --out store.go
</span></span></code></pre></div><p>Example code, ABI and Go bindings:</p><ul><li><a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-sol>Source code</a></li><li><a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-abi>ABI JSON</a></li><li><a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-go>Generated Go bindings</a></li></ul><hr><h2 id=getting-the-abi-from-etherscan>Getting the ABI from Etherscan</h2><p><a href=https://etherscan.io>Etherscan</a> provides ABI downloads for verified smart contracts through the <a href=https://etherscan.io/apis#contracts>API</a> and website.</p><p>Example API call to get the <a href=https://etherscan.io/address/0xE592427A0AEce92De3Edee1F18E0157C05861564>Uniswap V3 Router contract</a> ABI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>https://api.etherscan.io/api?module=contract&amp;action=getabi&amp;address=0xE592427A0AEce92De3Edee1F18E0157C05861564
</span></span></code></pre></div><p>Response:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#e6db74>&#34;1&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;OK-Missing/Invalid API Key, rate limit of 1/5sec applied&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#f92672>&#34;result&#34;</span>: <span style=color:#e6db74>&#34;[{\&#34;inputs\&#34;:[],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;constructor\&#34;},{\&#34;anonymous\&#34;:false,\&#34;inputs\&#34;:[{\&#34;indexed\&#34;:true,\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;owner\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;indexed\&#34;:true,\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;spender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;indexed\&#34;:false,\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;value\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;Approval\&#34;,\&#34;type\&#34;:\&#34;event\&#34;},{\&#34;anonymous\&#34;:false,\&#34;inputs\&#34;:[{\&#34;indexed\&#34;:true,\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;from\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;indexed\&#34;:true,\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;to\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;indexed\&#34;:false,\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;value\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;Transfer\&#34;,\&#34;type\&#34;:\&#34;event\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;owner\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;spender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;}],\&#34;name\&#34;:\&#34;allowance\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;spender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;amount\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;approve\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;bool\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;bool\&#34;}],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;account\&#34;,\&#34;type\&#34;:\&#34;address\&#34;}],\&#34;name\&#34;:\&#34;balanceOf\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[],\&#34;name\&#34;:\&#34;decimals\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;uint8\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;uint8\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;spender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;subtractedValue\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;decreaseAllowance\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;bool\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;bool\&#34;}],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;spender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;addedValue\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;increaseAllowance\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;bool\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;bool\&#34;}],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[],\&#34;name\&#34;:\&#34;name\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;string\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;string\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[],\&#34;name\&#34;:\&#34;symbol\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;string\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;string\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[],\&#34;name\&#34;:\&#34;totalSupply\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;stateMutability\&#34;:\&#34;view\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;recipient\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;amount\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;transfer\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;bool\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;bool\&#34;}],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;function\&#34;},{\&#34;inputs\&#34;:[{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;sender\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;address\&#34;,\&#34;name\&#34;:\&#34;recipient\&#34;,\&#34;type\&#34;:\&#34;address\&#34;},{\&#34;internalType\&#34;:\&#34;uint256\&#34;,\&#34;name\&#34;:\&#34;amount\&#34;,\&#34;type\&#34;:\&#34;uint256\&#34;}],\&#34;name\&#34;:\&#34;transferFrom\&#34;,\&#34;outputs\&#34;:[{\&#34;internalType\&#34;:\&#34;bool\&#34;,\&#34;name\&#34;:\&#34;\&#34;,\&#34;type\&#34;:\&#34;bool\&#34;}],\&#34;stateMutability\&#34;:\&#34;nonpayable\&#34;,\&#34;type\&#34;:\&#34;function\&#34;}]&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Or you can manually export the ABI by visiting the <a href=https://etherscan.io/address/0xe592427a0aece92de3edee1f18e0157c05861564#code>&ldquo;Contract&rdquo; tab</a> and scrolling down to the &ldquo;Contract ABI&rdquo; text area:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/eth-go/etherscan1.png alt="Download the ABI from Etherscan"></div><a href=https://www.metachris.dev/images/posts/eth-go/etherscan1.png itemprop=contentUrl></a><figcaption><p>Download the ABI from Etherscan</p></figcaption></figure></div><p>You can save this as <code>uniswap.abi</code> and generate the Go bindings like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>abigen --abi uniswap.abi --pkg uniswap --out uniswap.go
</span></span></code></pre></div><hr><h2 id=prebuilt-go-bindings>Prebuilt Go bindings</h2><p>You can find prebuilt Go bindings on the internet, although many of them target older versions of
Go and are not compatible. Here&rsquo;s links to some good repositories:</p><ul><li><a href=https://github.com/fxfactorial/defi-abigen>github.com/fxfactorial/defi-abigen</a> is a great collection of bindings for Aave, Chainlink price feed, Compound, Erc20, Onesplit and Uniswap (made by <a href=https://twitter.com/EdgarArout>@Edgar</a>)</li><li><a href=https://github.com/metachris/eth-go-bindings>github.com/metachris/eth-go-bindings</a> has bindings for ERC20, 165, 721, 777 and ERC1155 smart contracts</li></ul><hr><h2 id=using-the-go-bindings>Using the Go bindings</h2><p>This is an example of using the Go bindings to call a contract method (eg. <code>name()</code> of a token contract):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Connect to a geth node (when using Infura, you need to use your own API key)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ethclient</span>.<span style=color:#a6e22e>Dial</span>(<span style=color:#e6db74>&#34;https://mainnet.infura.io/v3/7238211010344719ad14a89db874158c&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatalf</span>(<span style=color:#e6db74>&#34;Failed to connect to the Ethereum client: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Instantiate the contract and display its name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>address</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>common</span>.<span style=color:#a6e22e>HexToAddress</span>(<span style=color:#e6db74>&#34;0x1f9840a85d5af5bf1d1762f925bdaddc4201f984&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>token</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>NewToken</span>(<span style=color:#a6e22e>address</span>, <span style=color:#a6e22e>conn</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatalf</span>(<span style=color:#e6db74>&#34;Failed to instantiate a Token contract: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Access token properties
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>Name</span>(<span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatalf</span>(<span style=color:#e6db74>&#34;Failed to retrieve token name: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Token name:&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=references>References</h2><ul><li><a href=https://geth.ethereum.org/docs/dapp/native-bindings>https://geth.ethereum.org/docs/dapp/native-bindings</a></li><li><a href=https://goethereumbook.org/en/smart-contract-compile/>https://goethereumbook.org/en/smart-contract-compile/</a></li><li><a href=https://github.com/ethereum/go-ethereum>https://github.com/ethereum/go-ethereum</a></li><li><a href=https://docs.soliditylang.org/en/develop/abi-spec.html>https://docs.soliditylang.org/en/develop/abi-spec.html</a></li><li><a href=https://www.trufflesuite.com/docs/truffle/overview>https://www.trufflesuite.com/docs/truffle/overview</a></li><li><a href=https://github.com/OpenZeppelin/openzeppelin-contracts>https://github.com/OpenZeppelin/openzeppelin-contracts</a></li><li><a href=http://remix.ethereum.org>http://remix.ethereum.org</a></li><li>Examples: <a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-sol>Store.sol</a>, <a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-abi>Store.abi</a>, <a href=https://gist.github.com/metachris/ebff1e3d04c6874c5631c14badcb6ded#file-store-go>Store.go</a></li><li>Prebuilt bindings:<ul><li><a href=https://github.com/metachris/eth-go-bindings>https://github.com/metachris/eth-go-bindings</a> - standard smart contracts: ERC20, 165, 721, 777, 1155</li><li><a href=https://github.com/fxfactorial/defi-abigen>https://github.com/fxfactorial/defi-abigen</a> - Aave, Chainlink price feed, Compound, Erc20, Onesplit and Uniswap (by <a href=https://twitter.com/EdgarArout>@Edgar</a>)</li></ul></li></ul><hr><p>Reach out:</p><ul><li><a href=https://twitter.com/metachris>@metachris</a></li><li>Leave a comment below &#x1f447;</li></ul></div><hr><div class=subscribe-form><p>Enjoyed this post? Subscribe to get notified about new articles.</p><form action=https://buttondown.com/api/emails/embed-subscribe/metachris method=post target=_blank><input type=hidden name=tag value=metachris.dev/post>
<input type=email name=email placeholder=your@email.com required>
<button type=submit>Subscribe</button></form></div><hr><div style=float:right><div class=tags><svg width="16" height="16" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true" style="display:inline-block;vertical-align:text-bottom"><path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414.0l-7-7A.997.997.0 012 10V5a3 3 0 013-3h5c.256.0.512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/></svg><a href=https://www.metachris.dev/tags/ethereum/>Ethereum</a>
<span class=separator>â€¢</span>
<a href=https://www.metachris.dev/tags/go/>Go</a></div></div><div style=clear:both></div><div class=bottom-post-links><div class=prev><span class=title>PREVIOUS POST</span><br><a href=https://www.metachris.dev/2021/04/starting-a-typescript-project-in-2021/>Starting a TypeScript Project in 2021</a></div><div class=next><span class=title>NEXT POST</span><br><a href=https://www.metachris.dev/2021/07/securing-private-keys-with-a-high-performance-threshold-signature-based-protocol/>Securing private keys with a high-performance, threshold signature-based protocol</a></div></div><hr><footer><a id=comments></a><h2>Comments</h2><script src=https://utteranc.es/client.js repo=metachris/metachris.dev-comments issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script></footer></article></section></div><footer class=footer><section class=container></section></footer></main><script src=https://www.metachris.dev/js/dark-mode.min.6948493aa1da5fe4e63b34961a67cde1361353b72c9e2d61f024a34872147559.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=5434b4c9-8ffe-4321-ad55-33012bbb5e73></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168016633-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-168016633-1")</script></body></html>