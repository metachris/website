<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Chris Hager"><meta name=description content="AI coding assistants and other devtools can steal your credentials and data. Here's how to run them safely in isolated VMs using Lima on macOS/Linux."><meta name=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.metachris.dev/images/posts/ai-sandbox/cover.jpg"><meta name=twitter:title content="Sandbox Your AI Dev Tools: A Practical Guide for VMs and Lima"><meta name=twitter:description content="AI coding assistants and other devtools can steal your credentials and data. Here's how to run them safely in isolated VMs using Lima on macOS/Linux."><meta property="og:title" content="Sandbox Your AI Dev Tools: A Practical Guide for VMs and Lima"><meta property="og:description" content="AI coding assistants and other devtools can steal your credentials and data. Here's how to run them safely in isolated VMs using Lima on macOS/Linux."><meta property="og:type" content="article"><meta property="og:url" content="https://www.metachris.dev/2025/11/sandbox-your-ai-dev-tools-a-practical-guide-for-vms-and-lima/"><meta property="og:image" content="https://www.metachris.dev/images/posts/ai-sandbox/cover.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-25T00:00:00+00:00"><meta property="article:modified_time" content="2025-11-25T00:00:00+00:00"><base href=https://www.metachris.dev/2025/11/sandbox-your-ai-dev-tools-a-practical-guide-for-vms-and-lima/><title>Sandbox Your AI Dev Tools: A Practical Guide for VMs and Lima Â· Chris Hager
</title><link rel=canonical href=https://www.metachris.dev/2025/11/sandbox-your-ai-dev-tools-a-practical-guide-for-vms-and-lima/><link rel=stylesheet href=https://www.metachris.dev/css/normalize.min.css><link rel=stylesheet href=https://www.metachris.dev/css/coder.min.b264ded956f78952483311122dc15a4f063ddb1a48c781695b2374838257e557.css integrity="sha256-smTe2Vb3iVJIMxESLcFaTwY92xpIx4FpWyN0g4JX5Vc=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.metachris.dev/css/coder-dark.min.47e2bf508bd8d2609f50751fec4e8bea1d7d66645d0a2fb25c4a43f5ecac097b.css integrity="sha256-R+K/UIvY0mCfUHUf7E6L6h19ZmRdCi+yXEpD9eysCXs=" crossorigin=anonymous media=screen><script src=https://www.metachris.dev/js/custom.js></script><link rel=stylesheet href=https://www.metachris.dev/scss/custom.min.5c77ef03b42015ada633d2e8cc8d81005ba1b3463bda0e080f47e4559c2b8aa3.css integrity="sha256-XHfvA7QgFa2mM9LozI2BAFuhs0Y72g4ID0fkVZwriqM=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-32px.png sizes=32x32><link rel=icon type=image/png href=https://www.metachris.dev/images/favicon-16px.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://www.metachris.devindex.xml title="Site Title"></head><body class=colorscheme-auto><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.metachris.dev/>Chris Hager
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><svg width="20" height="20" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://www.metachris.dev/about/>About</a></li><li class=navigation-item><a id=dark-mode-toggle class=colorscheme-toggle title="Toggle light/dark theme" style=cursor:pointer><span id=theme-icon>ðŸŒ™</span></a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Sandbox Your AI Dev Tools: A Practical Guide for VMs and Lima</h1></div><div class=post-meta><div class=date><span class=posted-on><time datetime=2025-11-25T00:00:00Z>November 2025</time></span></div></div></header><div class=single-content><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://www.metachris.dev/js/load-photoswipe.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin=anonymous></script><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><p>AI coding assistants, npm, pip, and other development tools can run arbitrary code and scripts on your machine, potentially stealing SSH keys, API tokens, wallet keys, sensitive credentials and other private data without you noticing.</p><p>This guide shows you how to sandbox these tools in isolated VMs using <a href=https://github.com/lima-vm/lima>Lima</a>, so you can experiment and develop freely without putting your sensitive data at risk.
<a href=#lima-vm-introduction>Jump straight to the guide</a>, or read on for a bit of personal context.</p><style type=text/css>.fig1-wrap img{border:1px solid #b5b5b5;border-radius:3px}</style><center class=fig1-wrap style=max-width:800px;margin:auto;margin-top:3.5rem><link rel=stylesheet href=https://www.metachris.dev/css/hugo-easy-gallery.css><div class=box><figure class=fig1 itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/cover.jpg alt="Cooperation flow for creating a signature"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/cover.jpg itemprop=contentUrl></a></figure></div></center><hr><h1 id=contents>Contents</h1><aside><nav id=TableOfContents><ul><li><a href=#personal-context>Personal context</a></li><li><a href=#why-vms-over-docker>Why VMs over Docker?</a></li><li><a href=#lima-vm-introduction>Lima VM introduction</a><ul><li><a href=#install-lima>Install Lima</a></li></ul></li><li><a href=#getting-started>Getting started</a><ul><li><a href=#prepare-a-shared-directory>Prepare a shared directory</a></li><li><a href=#setup-vm-defaults>Setup VM defaults</a></li><li><a href=#prepare-easy-ssh-access>Prepare easy SSH access</a></li><li><a href=#start-a-vm>Start a VM</a></li><li><a href=#share-project-specific-directories>Share project-specific directories</a></li><li><a href=#ssh-into-the-vm>SSH into the VM</a></li><li><a href=#update-services-and-setup-bash>Update services and setup bash</a></li><li><a href=#test-port-forwarding>Test port forwarding</a></li></ul></li><li><a href=#install-tools-and-languages>Install tools and languages</a><ul><li><a href=#using-mise-en-place>Using Mise-En-Place</a></li><li><a href=#golang>Golang</a></li><li><a href=#nodejs>Node.js</a></li><li><a href=#docker>Docker</a></li><li><a href=#github-cli>GitHub CLI</a></li></ul></li><li><a href=#visual-studio-code---remote-ssh-session>Visual Studio Code - Remote-SSH Session</a></li><li><a href=#claude-code-codex-and-gemini>Claude Code, Codex and Gemini</a><ul><li><a href=#claude-code>Claude Code</a></li><li><a href=#gemini-cli>Gemini CLI</a></li><li><a href=#codex-cli>Codex CLI</a></li><li><a href=#other-tools>Other tools</a></li></ul></li><li><a href=#vm-cloning-and-snapshots>VM cloning and snapshots</a><ul><li><a href=#limactl-clone><code>limactl clone</code></a></li></ul></li><li><a href=#multi-vm-workflows>Multi-VM workflows</a><ul><li><a href=#one-vm-per-project>One VM per project</a></li></ul></li><li><a href=#creating-custom-templates>Creating custom templates</a></li><li><a href=#best-practices>Best practices</a></li></ul></nav></aside><hr><h2 id=personal-context>Personal context</h2><p>I&rsquo;ve been having quite a bit of fun with AI assisted coding recently.</p><p>I use LLMs for a wide range of things, including discussing architecture, design choices, learning about new tools and libraries I wasn&rsquo;t previously aware of, to reviewing PRs and quickly cranking out dirty prototypes.</p><p>Especially for hobby projects that are not meant to ever go into production, I enjoy playing with AI tools fast and loose, producing results quickly and not getting slowed down by annoying things such as reading code before running it ðŸ¤£.</p><p>And yeah&mldr; that&rsquo;s obviously unsafe, unless it&rsquo;s all contained in a sandbox!</p><p>You should never run potentially dangerous, experimental code on your main machine, since it could steal your passwords, API keys, environment variables, private keys, access to your communication tools, install services, and do all sorts of other nefarious things.</p><p>Nowadays I isolate all my devtools in VMs, and thought it might be useful to others if I put together a guide to shows how to do it. Well, here it is, and I hope it&rsquo;ll be useful to you, too!</p><p>You&rsquo;ll want to run the entire development environment, including the AI tool itself, inside a sandbox. This way it&rsquo;s safe to install dependencies and to execute code, and unlocks other fun features like snapshots before running sketchy code, and reverting if something goes wrong.</p><p>And it&rsquo;s not just AI-generated code. Node.js/npm/yarn and Python/pip are particularly troublesome because they allow any package to run arbitrary scripts on your system during installation, and install tons of additional dependencies that can do the same. This attack vector is called &ldquo;<a href=https://developer.mozilla.org/en-US/docs/Web/Security/Attacks/Supply_chain_attacks>supply chain attack</a>&rdquo; and <a href=https://www.cisa.gov/news-events/alerts/2025/09/23/widespread-supply-chain-compromise-impacting-npm-ecosystem>it</a> <a href=https://socket.dev/blog/ongoing-supply-chain-attack-targets-crowdstrike-npm-packages>happens</a> <a href=https://semgrep.dev/blog/2025/security-alert-nx-compromised-to-steal-wallets-and-credentials/>all</a> <a href=https://www.kaspersky.com/about/press-releases/kaspersky-uncovers-year-long-pypi-supply-chain-attack-using-ai-chatbot-tools-as-lure>the</a> <a href=https://checkmarx.com/zero-post/python-pypi-supply-chain-attack-colorama/>time</a>.</p><hr><h2 id=why-vms-over-docker>Why VMs over Docker?</h2><p>Virtual Machines (VMs) and Containers (i.e. Docker, Podman, containerd) are the two most practical methods for isolating development tools from your host operating system. VMs provide much stronger protection and more flexibility overall, and are better suited for co-developing with AIs.</p><p>Container runtimes share the host operating system&rsquo;s kernel, which means they&rsquo;re fundamentally running on the same system as your main machine, just with isolated namespaces and resource limits. This creates several security concerns:</p><ul><li><strong>Kernel vulnerabilities</strong>: If malicious code finds a kernel exploit, it can potentially escape the container and access the host system. These exploits are discovered regularly, and you&rsquo;re betting that your kernel is fully patched and has no zero-days.</li><li><strong>Shared resources</strong>: Containers share the same kernel, which means they&rsquo;re accessing the same system calls, device drivers, and kernel modules. This expanded attack surface has led to numerous container escape vulnerabilities over the years.</li><li><strong>Limited isolation</strong>: While containers provide process and filesystem isolation, it&rsquo;s more of a convenience boundary than a true security barrier. Tools like <code>docker run --privileged</code> or mounting host directories can easily weaken or bypass these protections, and AI-generated code might do exactly that without you noticing.</li></ul><p>In contrast, a VM runs its own complete operating system with its own kernel. The hypervisor (like QEMU/KVM) creates a much stronger isolation boundary. Even if malicious code completely compromises the VM, it would need to exploit the hypervisor itself to reach your host, a significantly harder target.</p><p>Furthermore, a VM enables better concurrency. It can run Docker containers, databases, web servers, multiple build processes, and background services all at once, and the AI tool can interact with everything naturally just like on a normal development machine.</p><hr><h2 id=lima-vm-introduction>Lima VM introduction</h2><p>In this guide, we use <a href=https://lima-vm.io>Lima VM</a> to sandbox AI and devtools. Lima is a delightful, lightweight virtual machine manager for Linux and macOS which provides easy and quick ways to create and manage VMs.</p><p>You interact with Lima through the <code>limactl</code> command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># List all VM instances</span>
</span></span><span style=display:flex><span>limactl list
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a new VM using the &#34;default&#34; template (Ubuntu 25.10 + home directory mount)</span>
</span></span><span style=display:flex><span>limactl start --name dev template:default
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Open a shell</span>
</span></span><span style=display:flex><span>limactl shell dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Open a shell with SSH</span>
</span></span><span style=display:flex><span>ssh -F ~/.lima/dev/ssh.config lima-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Restart</span>
</span></span><span style=display:flex><span>limactl restart dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Delete a VM instance</span>
</span></span><span style=display:flex><span>limactl delete dev -f
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Show a list of available templates</span>
</span></span><span style=display:flex><span>limactl start --list-templates
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Start an instance using another template and a custom name</span>
</span></span><span style=display:flex><span>limactl start --name dev template:debian
</span></span></code></pre></div><p><strong>Notes:</strong></p><ul><li>Lima mounts your entire home directory from the host into the VM by default, which is something we want to avoid to protect our files. The guide below shows how to do that using custom VM templates.</li><li>Lima places all VM related configurations and files into the <code>~/.lima</code> directory (specifically <code>~/.lima/&lt;vm_name>/</code> and <code>~/.lima/_config/</code>).</li></ul><p><strong>About Lima:</strong></p><ul><li><a href=https://lima-vm.io>https://lima-vm.io</a></li><li><a href=https://github.com/lima-vm/lima>https://github.com/lima-vm/lima</a> (20k stars)</li><li><a href=https://jvns.ca/blog/2023/07/10/lima--a-nice-way-to-run-linux-vms-on-mac>https://jvns.ca/blog/2023/07/10/lima--a-nice-way-to-run-linux-vms-on-mac</a></li><li><a href="https://www.youtube.com/watch?v=2SGyhd5OI-c">https://www.youtube.com/watch?v=2SGyhd5OI-c</a></li><li>Lima is part of Linux Foundation&rsquo;s <a href=https://www.cncf.io/>Cloud Native Computing Foundation (CNCF)</a></li></ul><p><strong>Lima Templates:</strong></p><p>VMs are based on templates, which can include (build on) other templates:</p><ul><li><a href=https://github.com/lima-vm/lima/blob/master/templates/default.yaml>https://github.com/lima-vm/lima/blob/master/templates/default.yaml</a></li><li><a href=https://github.com/lima-vm/lima/blob/master/templates/ubuntu-25.10.yaml>https://github.com/lima-vm/lima/blob/master/templates/ubuntu-25.10.yaml</a></li><li><a href=https://github.com/lima-vm/lima/blob/master/templates/README.md>https://github.com/lima-vm/lima/blob/master/templates/README.md</a></li></ul><h3 id=install-lima>Install Lima</h3><p>The <a href=https://lima-vm.io/docs/installation/>Lima VM docs</a> have platform-specific installation guides.</p><p>Homebrew is recommended on macOS:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install</span>
</span></span><span style=display:flex><span>brew install lima
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update</span>
</span></span><span style=display:flex><span>brew upgrade lima
</span></span></code></pre></div><p>On Linux install the binary like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>VERSION<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>curl -fsSL https://api.github.com/repos/lima-vm/lima/releases/latest | jq -r .tag_name<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>curl -fsSL <span style=color:#e6db74>&#34;https://github.com/lima-vm/lima/releases/download/</span><span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>/lima-</span><span style=color:#e6db74>${</span>VERSION:1<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -s<span style=color:#66d9ef>)</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span><span style=color:#e6db74>.tar.gz&#34;</span> | tar Cxzvm /usr/local
</span></span><span style=display:flex><span>curl -fsSL <span style=color:#e6db74>&#34;https://github.com/lima-vm/lima/releases/download/</span><span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span><span style=color:#e6db74>/lima-additional-guestagents-</span><span style=color:#e6db74>${</span>VERSION:1<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -s<span style=color:#66d9ef>)</span><span style=color:#e6db74>-</span><span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span><span style=color:#e6db74>.tar.gz&#34;</span> | tar Cxzvm /usr/local
</span></span></code></pre></div><p>Now ensure your Lima version is up-to-date:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ limactl --version
</span></span><span style=display:flex><span>limactl version 2.0.1
</span></span></code></pre></div><hr><h2 id=getting-started>Getting started</h2><p>In this section, we will:</p><ol><li>Prepare a shared directory</li><li>Setup VM defaults</li><li>Start a first VM instance</li></ol><p>Let&rsquo;s dive right in!</p><h3 id=prepare-a-shared-directory>Prepare a shared directory</h3><p>We only want to share very specific host directories with the VM.</p><p>Let&rsquo;s create <code>~/VM-Shared</code> on the host, which we later mount into the VM at <code>~/Shared</code> (with write access):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir ~/VM-Shared
</span></span></code></pre></div><p>You can use that directory to easily copy files between the host and the VM, and to share project directories from the host with the VM.</p><h3 id=setup-vm-defaults>Setup VM defaults</h3><p>Defaults for all VMs can be defined in <code>~/.lima/_config/default.yaml</code>.</p><p>Let&rsquo;s enable the following:</p><ol><li>Mount <code>~/VM-Shared</code> from the host (on <code>~/Shared</code> inside the VM).</li><li>Forward ports from the VM to the host (i.e. the range from 8000 to 9000).</li><li>CPUs and memory the VM is allowed to use (defaults: <a href=https://github.com/lima-vm/lima/blob/53b7efe0902e768d09bb1e1cadd66d2debaa199a/templates/default.yaml#L25-L26>4 CPUs</a> and <a href=https://github.com/lima-vm/lima/blob/53b7efe0902e768d09bb1e1cadd66d2debaa199a/templates/default.yaml#L29-L30>4 GiB RAM</a>, 100GiB disk space)</li></ol><p>Let&rsquo;s create the default YAML file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt; ~/.lima/_config/default.yaml <span style=color:#e6db74>&lt;&lt; EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>mounts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- location: &#34;~/VM-Shared&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  mountPoint: &#34;{{.Home}}/Shared&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  writable: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>portForwards:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- guestPortRange: [8000, 9000]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  hostPortRange: [8000, 9000]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Adjust these based on your system and preferences
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cpus: 6
</span></span></span><span style=display:flex><span><span style=color:#e6db74>memory: 16GiB
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Notes:</p><ul><li>As part of these defaults, you may want to share additional project directories.</li><li>You can also adjust all these settings per instance. Either edit the config when starting a VM, or update the instance configuration in <code>~/.lima/&lt;vm_name>/lima.yaml</code> after the VM started, and reboot it afterwards.</li><li>Port forwarding might stop working after the host machine suspends, and reactivating may need a VM restart.</li></ul><h3 id=prepare-easy-ssh-access>Prepare easy SSH access</h3><p>Lima conveniently creates default SSH configuration files for all VM instances, which makes it easy to log in with SSH (including using VS Code for a Remote-SSH session).</p><p>I recommend using a <code>~/.ssh/config.d/</code> directory on the host and have SSH include all configs there by default. That allows us to simply link the Lima-created config files there to use them.</p><p>Create the directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir ~/.ssh/config.d
</span></span></code></pre></div><p>Add this as first line in your <code>~/.ssh/config</code> file, to make SSH include all configs from there:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Include config.d/*
</span></span></code></pre></div><p>Great! After creating a new VM, we can now simply create a symlink to the Lima-generated SSH configs and use it to SSH into the instance.</p><h3 id=start-a-vm>Start a VM</h3><p>Let&rsquo;s start an Ubuntu 25.10 VM instance, named <code>dev</code>.
We use the internal <a href=https://raw.githubusercontent.com/lima-vm/lima/refs/heads/master/templates/_images/ubuntu-25.10.yaml><code>_images/ubuntu-25.10.yaml</code> template</a> because it doesn&rsquo;t include the automatic home directory sharing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>limactl start --name dev -y template:_images/ubuntu-25.10.yaml
</span></span></code></pre></div><p>Notes:</p><ul><li>Using the <code>-y</code> flag automatically starts the VM without asking first whether you want to edit the instance configuration.</li><li>Instead of using an internal template, you can also manually disable home directory sharing, by editing the template when starting the VM or afterwards by editing <code>~/.lima/&lt;vm_name>/lima.yaml</code>.</li></ul><details><summary>Useful commands to manage the VM lifecycle (click to expand).</summary><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Restart the VM</span>
</span></span><span style=display:flex><span>limactl restart dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Stop the VM</span>
</span></span><span style=display:flex><span>limactl stop dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Start the VM</span>
</span></span><span style=display:flex><span>limactl start dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Delete the VM</span>
</span></span><span style=display:flex><span>limactl delete dev -f
</span></span></code></pre></div></details><h3 id=share-project-specific-directories>Share project-specific directories</h3><p>You can share additional project-specific directories between host and VM in several ways:</p><ol><li>Edit the instance configuration before starting it (by not using the <code>-y</code> flag) and adjust the <a href=https://github.com/lima-vm/lima/blob/53b7efe0902e768d09bb1e1cadd66d2debaa199a/templates/default.yaml#L36-L43><code>mounts</code> section</a>.</li><li>Edit the instance configuration after it&rsquo;s started by editing <code>~/.lima/&lt;vm_name>/lima.yaml</code> and rebooting the instance.</li><li>Creating a custom template and launching the instance based on that (more complex but could be useful for repeated use cases).</li></ol><h3 id=ssh-into-the-vm>SSH into the VM</h3><p>Create a symlink for the SSH config file and SSH into the VM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create a symlink for the SSH config file</span>
</span></span><span style=display:flex><span>ln -s ~/.lima/dev/ssh.config ~/.ssh/config.d/lima-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># SSH into the VM</span>
</span></span><span style=display:flex><span>ssh lima-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Once inside the VM, look around...</span>
</span></span><span style=display:flex><span>metachris@lima-dev:~$ uname -m
</span></span><span style=display:flex><span>aarch64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>metachris@lima-dev:~$ uname -a
</span></span><span style=display:flex><span>Linux lima-dev 6.17.0-5-generic <span style=color:#75715e>#5-Ubuntu SMP PREEMPT_DYNAMIC Mon Sep 22 09:50:31 UTC 2025 aarch64 GNU/Linux</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>metachris@lima-dev:~$ ls -alh
</span></span><span style=display:flex><span>total 36K
</span></span><span style=display:flex><span>drwxr-xr-x <span style=color:#ae81ff>7</span> metachris root      4.0K Nov <span style=color:#ae81ff>19</span> 12:32 .
</span></span><span style=display:flex><span>drwxr-xr-x <span style=color:#ae81ff>3</span> root      root      4.0K Nov <span style=color:#ae81ff>19</span> 12:31 ..
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> metachris root       <span style=color:#ae81ff>116</span> Nov <span style=color:#ae81ff>19</span> 12:31 .bashrc
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>2</span> metachris metachris 4.0K Nov <span style=color:#ae81ff>19</span> 12:32 .cache
</span></span><span style=display:flex><span>drwxr-xr-x <span style=color:#ae81ff>5</span> metachris root      4.0K Nov <span style=color:#ae81ff>19</span> 12:32 .config
</span></span><span style=display:flex><span>drwxrwxr-x <span style=color:#ae81ff>3</span> metachris metachris 4.0K Nov <span style=color:#ae81ff>19</span> 12:32 .local
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> metachris root       <span style=color:#ae81ff>116</span> Nov <span style=color:#ae81ff>19</span> 12:31 .profile
</span></span><span style=display:flex><span>drwx------ <span style=color:#ae81ff>2</span> metachris metachris 4.0K Nov <span style=color:#ae81ff>19</span> 12:31 .ssh
</span></span><span style=display:flex><span>-rw-r--r-- <span style=color:#ae81ff>1</span> metachris root       <span style=color:#ae81ff>116</span> Nov <span style=color:#ae81ff>19</span> 12:31 .zshrc
</span></span><span style=display:flex><span>drwxr-xr-x <span style=color:#ae81ff>3</span> metachris metachris   <span style=color:#ae81ff>96</span> Nov <span style=color:#ae81ff>19</span> 09:55 Shared
</span></span><span style=display:flex><span><span style=color:#75715e>#                the mounted Shared folder is here ^^^^^^</span>
</span></span></code></pre></div><p>ðŸŽ‰ Success!</p><h3 id=update-services-and-setup-bash>Update services and setup bash</h3><p>Let&rsquo;s update the services on the instance, and configure git:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Update the system</span>
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get upgrade -y
</span></span><span style=display:flex><span>sudo apt-get install -y vim screen htop iotop sysstat smem ccze jq build-essential ca-certificates pkg-config libssl-dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setup git author info</span>
</span></span><span style=display:flex><span>git config --global user.name <span style=color:#e6db74>&#34;Your Name&#34;</span>
</span></span><span style=display:flex><span>git config --global user.email <span style=color:#e6db74>&#34;you@domain.net&#34;</span>
</span></span><span style=display:flex><span>git config --global core.untrackedCache false
</span></span><span style=display:flex><span><span style=color:#75715e># git config --global core.editor &#34;vim&#34;  # optional</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a .bash_profile file that loads .bashrc (SSH sessions use it)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;if [ -f ~/.bashrc ]; then . ~/.bashrc; fi&#39;</span> &gt;&gt; ~/.bash_profile
</span></span></code></pre></div><details><summary>I like to add a few opinionated goodies to <tt>/etc/bash.bashrc</tt> which drastically improve the bash experience (click to expand).</summary><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tee -a /etc/bash.bashrc &gt; /dev/null <span style=color:#e6db74>&lt;&lt; &#39;EOF&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Long bash history!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>export HISTSIZE=262144
</span></span></span><span style=display:flex><span><span style=color:#e6db74>export HISTFILESIZE=262144
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Path and default editor
</span></span></span><span style=display:flex><span><span style=color:#e6db74>export PATH=$PATH:/usr/local/go/bin:~/go/bin/:~/.local/bin
</span></span></span><span style=display:flex><span><span style=color:#e6db74>export EDITOR=&#34;vim&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>unset MAILCHECK
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># General aliases
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias ll=&#39;ls -alh&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias htop=&#34;htop --sort-key=PERCENT_CPU&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias sr=&#34;screen -d -r&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias as=&#34;apt search&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias ai=&#34;sudo apt-get install&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias s=&#34;systemctl status&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias j=&#34;journalctl -o cat&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias v=&#34;git describe --tags --always --dirty=-dev&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias myip=&#34;curl -4 ifconfig.me/ip&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74># Git aliases
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias g=&#34;git&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gs=&#39;git status -sb&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gd=&#34;git diff&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias ga=&#39;git add&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gb=&#39;git branch&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gc=&#39;git commit&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gl=&#39;git log --pretty=format:&#34;%h %ad | %s%d [%an]&#34; --graph --date=short&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias ggo=&#34;git checkout&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gds=&#39;git diff --staged&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>alias gca=&#34;git commit -a --amend&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div></details><h3 id=test-port-forwarding>Test port forwarding</h3><p>Let&rsquo;s confirm that port forwarding works. We do this using a one-liner Python HTTP server (on port 7777) inside the VM, and accessing it from the host:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># In the VM, start the HTTP server</span>
</span></span><span style=display:flex><span>metachris@lima-dev:~$ python3 -m http.server <span style=color:#ae81ff>7777</span>
</span></span><span style=display:flex><span>Serving HTTP on 0.0.0.0 port <span style=color:#ae81ff>7777</span> <span style=color:#f92672>(</span>http://0.0.0.0:7777/<span style=color:#f92672>)</span> ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># On the host, make a HTTP request to the server</span>
</span></span><span style=display:flex><span>$ curl localhost:7777
</span></span><span style=display:flex><span>&lt;!DOCTYPE HTML&gt;
</span></span><span style=display:flex><span>&lt;html lang<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Everything works, yay! ðŸŽ‰</p><hr><h2 id=install-tools-and-languages>Install tools and languages</h2><p>This section guides you through installing several other languages and development tools, including Golang, Node.js, Python, Rust, Docker.</p><p>We can accomplish that either by installing each tool according to it&rsquo;s documentation, or by using a version manager such as <a href="https://github.com/jdx/mise?tab=readme-ov-file"><code>mise</code> (&ldquo;mise-en-place&rdquo;, 22k stars on Github)</a> which can install <a href=https://mise.jdx.dev/registry.html#tools>hundreds of tools</a> via a simple command-line interface.</p><h3 id=using-mise-en-place>Using Mise-En-Place</h3><p>First, we install <a href="https://github.com/jdx/mise?tab=readme-ov-file"><code>mise</code> (&ldquo;mise-en-place&rdquo;, 22k stars on Github)</a> and make bash support it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install mise</span>
</span></span><span style=display:flex><span>curl https://mise.run | sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make bash know about it</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;eval &#34;$(~/.local/bin/mise activate bash)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span></code></pre></div><p>You use <code>mise latest &lt;tool></code> to see the latest versions it knows about:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mise latest node
</span></span><span style=display:flex><span>25.2.1
</span></span><span style=display:flex><span>$ mise latest go
</span></span><span style=display:flex><span>1.25.4
</span></span><span style=display:flex><span>$ mise latest rust
</span></span><span style=display:flex><span>1.91.1
</span></span><span style=display:flex><span>$ mise latest python
</span></span><span style=display:flex><span>3.14.0
</span></span></code></pre></div><p>Now you can install all the tools you want in a single command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mise use --global nodejs go rust cargo
</span></span></code></pre></div><h3 id=golang>Golang</h3><p>To manually install (or update) Golang in the VM, download the latest release and extract into <code>/usr/local/go</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Download latest release</span>
</span></span><span style=display:flex><span>GO_LATEST<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>curl -s <span style=color:#e6db74>&#39;https://go.dev/dl/?mode=json&#39;</span> | jq -r <span style=color:#e6db74>&#39;.[0].files[] | select(.os==&#34;linux&#34; and .arch==&#34;arm64&#34;) | .filename&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>curl -L <span style=color:#e6db74>&#34;https://go.dev/dl/</span>$GO_LATEST<span style=color:#e6db74>&#34;</span> -o go.tar.gz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extract and cleanup</span>
</span></span><span style=display:flex><span>sudo rm -rf /usr/local/go <span style=color:#f92672>&amp;&amp;</span> sudo tar -C /usr/local -xzf go.tar.gz
</span></span><span style=display:flex><span>rm go.tar.gz
</span></span></code></pre></div><p>The Golang path needs to be in the <code>PATH</code> environment variable, which we have <a href=#update-services-and-setup-bash>already added before</a>.</p><p>Verify the installation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ go version
</span></span><span style=display:flex><span>go version go1.25.4 linux/arm64
</span></span></code></pre></div><h3 id=nodejs>Node.js</h3><p>A good way to install a current version of Node.js in Ubuntu is by using <a href=https://github.com/nvm-sh/nvm>nvm, a modern node version manager</a> (90k stars on GitHub):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Install nvm</span>
</span></span><span style=display:flex><span>curl -fsSL https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh -o nvm-install.sh
</span></span><span style=display:flex><span>bash nvm-install.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Update the environment</span>
</span></span><span style=display:flex><span>source .bashrc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install Node.JS long-term support</span>
</span></span><span style=display:flex><span>nvm install --lts
</span></span></code></pre></div><p>Now it&rsquo;s all installed and ready to use! Check the versions like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>metachris@lima-dev:~$ node -v
</span></span><span style=display:flex><span>v24.11.1
</span></span><span style=display:flex><span>metachris@lima-dev:~$ npm -v
</span></span><span style=display:flex><span>11.6.2
</span></span></code></pre></div><h3 id=docker>Docker</h3><p>Perhaps you don&rsquo;t even need Docker, since Lima includes <a href=https://containerd.io/>containerd</a> and <a href=https://github.com/containerd/nerdctl><code>nerdctl</code></a> by default. This is a Docker-compatible runtime and command-line interface that can also run images from Docker Hub:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># List running containers</span>
</span></span><span style=display:flex><span>$ nerdctl ps
</span></span><span style=display:flex><span>CONTAINER ID    IMAGE    COMMAND    CREATED    STATUS    PORTS    NAMES
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Start a container from an image from Docker Hub (i.e. https://hub.docker.com/_/nginx)</span>
</span></span><span style=display:flex><span>$ nerdctl run nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># nerdctl is also compatible with docker-compose</span>
</span></span><span style=display:flex><span>$ nerdctl compose up
</span></span></code></pre></div><p>If you do want to install Docker, the <a href=https://docs.docker.com/get-started/get-docker/>quickest way to install</a> it by using their official <a href=https://get.docker.com/><code>get-docker.sh</code></a> script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Download and execute the installation script</span>
</span></span><span style=display:flex><span>curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span style=display:flex><span>sudo sh get-docker.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add the VM user to the docker group</span>
</span></span><span style=display:flex><span>sudo usermod -aG docker $USER
</span></span></code></pre></div><p>For the group changes to take effect, exit the shell and re-login (may need a VM restart).</p><p>Verify that user is in the &lsquo;docker&rsquo; group:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ groups $USER
</span></span><span style=display:flex><span>metachris : metachris docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Now you can interact with Docker</span>
</span></span><span style=display:flex><span>$ docker ps
</span></span><span style=display:flex><span>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span></code></pre></div><h3 id=github-cli>GitHub CLI</h3><p><a href=https://cli.github.com/manual/>GitHub CLI</a> provides a useful <code>gh</code> cli command that let&rsquo;s you easily interact with GitHub and private repositories.</p><p>You can install it in the VM following the <a href=https://github.com/cli/cli/blob/trunk/docs/install_linux.md#debian>Linux installation instructions</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>type -p wget &gt;/dev/null <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install wget -y<span style=color:#f92672>))</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> sudo mkdir -p -m <span style=color:#ae81ff>755</span> /etc/apt/keyrings <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> out<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>mktemp<span style=color:#66d9ef>)</span> <span style=color:#f92672>&amp;&amp;</span> wget -nv -O$out https://cli.github.com/packages/githubcli-archive-keyring.gpg <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> cat $out | sudo tee /etc/apt/keyrings/githubcli-archive-keyring.gpg &gt; /dev/null <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> sudo chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> sudo mkdir -p -m <span style=color:#ae81ff>755</span> /etc/apt/sources.list.d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;deb [arch=</span><span style=color:#66d9ef>$(</span>dpkg --print-architecture<span style=color:#66d9ef>)</span><span style=color:#e6db74> signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main&#34;</span> | sudo tee /etc/apt/sources.list.d/github-cli.list &gt; /dev/null <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> sudo apt update <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	<span style=color:#f92672>&amp;&amp;</span> sudo apt install gh -y
</span></span></code></pre></div><p>Warning: Authorizing GitHub CLI to access private repositories will leave an API key in the VM which could potentially be stolen by unauthorized scripts (which is what we wanted to avoid in first place by running everything in a VM).</p><p>Only authorize it with <code>gh auth login</code> for private repo access if you accept the risks! I personally avoid having any sensitive credentials in the VM, in particular those that allow access to private GitHub repositories.</p><hr><h2 id=visual-studio-code---remote-ssh-session>Visual Studio Code - Remote-SSH Session</h2><p>If you prefer an IDE like VS Code, you can use Remote-SSH to start a session inside the instance.</p><p>Please note that this is <strong>potentially unsafe</strong>, as explained in the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">Remote-SSH README</a>:</p><blockquote><p>Security Note
Using Remote-SSH opens a connection between your local machine and the remote. Only use Remote-SSH to connect to secure remote machines that you trust and that are owned by a party whom you trust. <strong>A compromised remote could use the VS Code Remote connection to execute code on your local machine.</strong></p></blockquote><p>See also <a href=https://github.com/microsoft/vscode-remote-release/issues/6608>this discussion on GitHub</a> for more context and information.</p><p>If you want to connect anyway:</p><ol><li>Press <code>Shift + cmd + P</code> to open the command palette</li><li>Type <code>ssh</code> and choose <code>Remote-SSH: Connect to Host...</code><div class=box style=max-width:600px><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh1.png alt="Command Palette - Remote-SSH"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh1.png itemprop=contentUrl></a></figure></div></li><li>Choose <code>lima-dev</code> (your SSH targets should automatically show up there)<div class=box style=max-width:600px><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh2.png alt="Choosing lima-dev as SSH target"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh2.png itemprop=contentUrl></a></figure></div></li></ol><p>Now a new VS Code window opens, and sets up VS Code Server:</p><div class=box style=max-width:600px><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh3.png alt="New VS Code window, setting up VS Code Server"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh3.png itemprop=contentUrl></a></figure></div><p>Then you can click &ldquo;Open&rdquo; and choose a folder, like <code>Shared</code>:</p><div class=box style=max-width:600px><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh4.png alt="Clicking on Open shows a list of available directories"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh4.png itemprop=contentUrl></a></figure></div><hr><h2 id=claude-code-codex-and-gemini>Claude Code, Codex and Gemini</h2><p>Before setting up the tools, let&rsquo;s create a &ldquo;Hello World&rdquo; directory in the Shared folder as our playground:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the hello world directory and change into it</span>
</span></span><span style=display:flex><span>mkdir -p ~/Shared/HelloWorld
</span></span><span style=display:flex><span>cd ~/Shared/HelloWorld
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create an empty README.md</span>
</span></span><span style=display:flex><span>touch README.md
</span></span></code></pre></div><h3 id=claude-code>Claude Code</h3><p>Let&rsquo;s start with installing <a href=https://code.claude.com>Claude Code</a> in the VM, following the instructions in the <a href=https://code.claude.com/docs/en/setup>documentation</a>:</p><p>Install Claude Code CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL https://claude.ai/install.sh | bash
</span></span></code></pre></div><p>Start Claude:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>claude
</span></span></code></pre></div><p>On first start, Claude asks you to authorize it.</p><p>The docs mention support for an <code>ANTHROPIC_API_KEY</code> environment variable (i.e. set in <code>.bashrc</code>), but that did not work when I tried it; <code>claude</code> CLI didn&rsquo;t let me skip the login process. Only after the login was done it notified me about the existing environment variable, and whether I&rsquo;d prefer to use that one.</p><p>After the login, Claude Code CLI is ready to be ued in the VM! ðŸŽ‰</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/claude1.png alt="Claude CLI"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/claude1.png itemprop=contentUrl></a></figure></div><p>Since Claude is running in a VM, it might be permissible to run it in &ldquo;dangerously skip permissions mode&rdquo;, which makes it bypass all permission checks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>claude --dangerously-skip-permissions
</span></span></code></pre></div><p>You could also create an alias for it and add it to your <code>.bashrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias claude<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;claude --dangerously-skip-permissions&#34;</span>
</span></span></code></pre></div><h4 id=claude-code-vs-code-extension>Claude Code VS Code Extension</h4><p>Anthropic provides <a href=https://code.claude.com/docs/en/vs-code>documentation for using Claude in VS Code</a>, and also offer a <a href="https://marketplace.visualstudio.com/items?itemName=anthropic.claude-code">VS Code Claude extension</a>.</p><p>You can install the Claude extension in the VM through the Remote-SSH session window:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh5.jpg alt="Clicking on Open shows a list of available directories"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-ssh5.jpg itemprop=contentUrl></a></figure></div><p>In contrast to the CLI tool, the authentication flow did not work through the user interface, and I had to set the <code>ANTHROPIC_API_KEY</code> environment variable:</p><ul><li>Create a new key via <a href=https://console.anthropic.com/settings/keys>https://console.anthropic.com/settings/keys</a></li><li>Edit <code>.bashrc</code> and set the env var:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export ANTHROPIC_API_KEY<span style=color:#f92672>=</span>sk-ant-api03-x-y...
</span></span></code></pre></div><p>Reload the VS Code window (open command palette with <code>Shift + CMD + P</code> and choose &ldquo;Developer: Reload Window&rdquo;):</p><div class=box style=max-width:600px><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-reload.png alt="VS Code command palette: Reload Window"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-reload.png itemprop=contentUrl></a></figure></div><p>Now the VS Code Claude extension should work:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-claude1.png alt="Claude Code working in VS Code"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-claude1.png itemprop=contentUrl></a></figure></div><p>If you want to enable &ldquo;dangerously skip permissions mode&rdquo; in the VS Code extension, you can enable it via your user settings. Open the settings (<code>CMD + ,</code>), search for &ldquo;claude&rdquo; and enable &ldquo;Claude Code: Allow Dangerously Skip Permissions&rdquo;:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-claude-perms.png alt="Claude Code: Allow Dangerously Skip Permissions"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/vs-code-claude-perms.png itemprop=contentUrl></a></figure></div><p>All done!</p><hr><h3 id=gemini-cli>Gemini CLI</h3><p>Let&rsquo;s install <a href=https://geminicli.com/>Gemini CLI</a> from Google next.</p><p>The <a href=https://geminicli.com/docs/get-started/deployment/>documentation</a> recommends installing it with <code>npm</code>, the Node.js package manager. You&rsquo;ll need to install Node and npm first, see also the <a href=#nodejs>Node.js setup instructions</a>.</p><p>Install Gemini CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install -g @google/gemini-cli
</span></span></code></pre></div><p>Run Gemini CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gemini
</span></span></code></pre></div><p>It will ask you to authenticate:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/gemini1.png alt="Gemini CLI initial window"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/gemini1.png itemprop=contentUrl></a></figure></div><p>I chose &ldquo;Login with Google&rdquo;. Note that the authentication flow may require a retry if the first attempt times fails.</p><p>After authorization is done, Gemini CLI works!</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/gemini3.png alt="Gemini CLI works"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/gemini3.png itemprop=contentUrl></a></figure></div><p>You can run Gemini in YOLO mode:</p><blockquote><p>Automatically accept all actions (aka YOLO mode, see <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">https://www.youtube.com/watch?v=xvFZjo5PgG0</a> for more details)</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gemini --yolo
</span></span></code></pre></div><p>The alias you could define in <code>.bashrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias gemini<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gemini --yolo&#34;</span>
</span></span></code></pre></div><hr><h3 id=codex-cli>Codex CLI</h3><p><a href=https://developers.openai.com/codex/cli/>Codex CLI</a> is the AI dev tool from OpenAI/ChatGPT.</p><p>Let&rsquo;s install it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm i -g @openai/codex
</span></span></code></pre></div><p>Run Codex CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>codex
</span></span></code></pre></div><p>It will ask you to sign in, either via ChatGPT or by providing an API key:</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/codex1.png alt="Codex CLI initial window"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/codex1.png itemprop=contentUrl></a></figure></div><p>After that is done, Codex CLI is ready to work for you!</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://www.metachris.dev/images/posts/ai-sandbox/codex4.png alt="Codex CLI ready"></div><a href=https://www.metachris.dev/images/posts/ai-sandbox/codex4.png itemprop=contentUrl></a></figure></div><p>You can also run Codex in dangerous mode:</p><blockquote><p>Skip all confirmation prompts and execute commands without sandboxing. EXTREMELY DANGEROUS. Intended solely for running in environments that are externally sandboxed</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>codex --dangerously-bypass-approvals-and-sandbox
</span></span></code></pre></div><p>The alias for your <code>.bashrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias codex<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;codex --dangerously-bypass-approvals-and-sandbox&#34;</span>
</span></span></code></pre></div><hr><h3 id=other-tools>Other tools</h3><p>There are several other great tools worth a mention:</p><ul><li><strong><a href=https://aider.chat/>Aider</a></strong> - Command-line AI pair programming tool, works with multiple LLMs (GPT-4, Claude, etc.). Very popular in the CLI AI dev space.</li><li><strong><a href=https://github.com/features/copilot/cli>GitHub Copilot CLI</a></strong> - Command-line AI pair programming tool, works with multiple LLMs (GPT-4, Claude, etc.). Very popular in the CLI AI dev space.</li><li><strong><a href=https://www.continue.dev/>Continue.dev</a></strong> - VS Code extension that supports several LLM backends</li><li><strong><a href=https://github.com/cline/cline>Cline</a></strong> - VS Code extension that supports several LLM backends</li></ul><p>Drop your favorite tools in the comments below!</p><hr><h2 id=vm-cloning-and-snapshots>VM cloning and snapshots</h2><p>VM clones and snapshots allow you even more flexibility and isolation. You can use them to quickly and cheaply run new VMs for experiments and specific projects based on already provisioned instances. Use them frequently!</p><p>Lima offers several ways to take VM snapshots and/or clone VMs.</p><ul><li>The command <code>limactl clone</code> to clone a VM.</li><li>The command <code>limactl snapshot</code>, but it&rsquo;s currently unimplemented for macOS.</li><li>Manual backup of important files inside <code>~/.lima/&lt;vm_name>/</code> (<code>basedisk</code> and <code>diffdisk</code>)</li></ul><h3 id=limactl-clone><code>limactl clone</code></h3><p>You can make a copy of an existing VM instance with <code>limactl clone</code>. The existing instance needs to be stopped first.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Stop the instance</span>
</span></span><span style=display:flex><span>$ limactl stop dev
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a copy named dev-base</span>
</span></span><span style=display:flex><span>$ limactl clone dev dev2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Show the help output</span>
</span></span><span style=display:flex><span>$ limactl clone -h
</span></span></code></pre></div><p>After all the initial VM setup is done, clone it and use it both as backup as well as a base for future instances:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the &#34;dev-base&#34; clone</span>
</span></span><span style=display:flex><span>$ limactl clone dev dev-base --start<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Spin up a new instance &#34;experiment123&#34; based on it</span>
</span></span><span style=display:flex><span>$ limactl clone dev-base experiment123 --start<span style=color:#f92672>=</span>true
</span></span></code></pre></div><p>Remember that after starting a new instance, you probably want to symlink the VM SSH configuration to your <code>~/.ssh/config.d/</code> directory, so <code>ssh</code> knows about it (See also <a href=#ssh-into-the-vm>&ldquo;SSH into the VM&rdquo;</a>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create the SSH symlink</span>
</span></span><span style=display:flex><span>ln -s ~/.lima/experiment123/ssh.config ~/.ssh/config.d/experiment123
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># SSH into the new instance</span>
</span></span><span style=display:flex><span>ssh lima-experiment123
</span></span></code></pre></div><hr><h2 id=multi-vm-workflows>Multi-VM workflows</h2><p>For maximum security and flexibility, consider using multiple VMs for different purposes and trust levels. This approach provides better isolation and lets you tailor each environment to specific needs.</p><p>Here are some suggested VM configurations:</p><ul><li><strong>dev-trusted</strong> - For known-safe projects with vetted dependencies. This VM can have slightly relaxed restrictions and potentially access to some credentials for deploying to staging environments.</li><li><strong>dev-experiments</strong> - For AI-generated code experiments and trying out new tools. This is where you let AI assistants run wild without worrying about the consequences.</li><li><strong>dev-dirty</strong> - For testing sketchy dependencies, unknown packages, or code from untrusted sources. Consider this VM completely compromised and never put any real data or credentials in it.</li></ul><p>You can quickly clone your base VM setup to create new instances for different projects using <code>limactl clone</code>, as described in the <a href=#vm-cloning-and-snapshots>VM cloning section</a> above.</p><h3 id=one-vm-per-project>One VM per project</h3><p>For sensitive or production projects, consider dedicating a separate VM to each project. This prevents potential cross-contamination between projects and allows you to mount only the specific project directories you need.</p><p>When creating project-specific VMs, you can customize the mounted directories by editing the instance configuration. Either adjust the <code>mounts</code> section before starting the VM (by not using the <code>-y</code> flag), or edit <code>~/.lima/&lt;vm_name>/lima.yaml</code> after creation and restart the instance.</p><p>This approach also makes it easier to share VM configurations with team members. Instead of sharing entire disk images, you can distribute just the Lima template YAML file, which team members can use to spin up identical environments on their machines.</p><p>For automated setup, Lima supports <a href=https://github.com/lima-vm/lima/blob/master/templates/default.yaml#L187-L197>provisioning scripts</a> that run during VM creation. For more complex setups, consider using idempotent provisioning tools like Ansible to ensure consistent environments across your team.</p><hr><h2 id=creating-custom-templates>Creating custom templates</h2><p>If you find yourself repeatedly creating VMs with similar configurations, consider creating custom Lima templates. Templates are YAML files that define VM settings, and they can include other templates.</p><p>Custom templates are useful for:</p><ul><li>Standardizing VM configurations across your team</li><li>Pre-installing specific tools and dependencies</li><li>Setting up project-specific mount points and port forwards</li><li>Defining different security profiles (trusted vs. experimental)</li></ul><p>You can create a custom template by copying and modifying an existing one from <a href=https://github.com/lima-vm/lima/tree/master/templates>Lima&rsquo;s template directory</a>. Save your custom templates in <code>~/.lima/_templates/</code> and reference them when creating new VMs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>limactl start --name myvm ~/.lima/_templates/my-custom-template.yaml
</span></span></code></pre></div><p>See the <a href=https://github.com/lima-vm/lima/blob/master/templates/README.md>Lima templates documentation</a> for more details on template syntax and available options.</p><hr><h2 id=best-practices>Best practices</h2><p>Here are some important security best practices to follow when using VMs for development:</p><p><strong>âœ… DO:</strong></p><ul><li>Use separate VMs for different trust levels (production, experiments, untrusted code)</li><li>Take snapshots before risky operations or installing unknown dependencies</li><li>Keep your VM software and tools updated regularly</li><li>Mount only the specific directories you need, not your entire home directory</li><li>Use the shared directory (<code>~/VM-Shared</code>) for transferring files between host and VM</li></ul><p><strong>âŒ DON&rsquo;T:</strong></p><ul><li>Store real credentials, API keys, or SSH keys in experimental VMs</li><li>Mount your entire home directory into the VM (Lima&rsquo;s default behavior)</li><li>Give VMs access to sensitive files or directories on your host</li><li>Authorize AI tools with access to private repositories unless you accept the risks</li><li>Run untrusted code on your host machine, even &ldquo;just to test quickly&rdquo;</li></ul><p>Remember: The whole point of using VMs is isolation. When in doubt, create a new VM for risky experiments and delete it afterwards.</p><hr><p>I hope this guide helps you get started quickly and right-footed!
As always, please leave feedback, questions and ideas in the comments below.</p><p>Have fun coding! ðŸ› ï¸</p><hr><p>Special thanks to <a href=https://github.com/ilyaluk>Ilya Lukyanov</a> and <a href=https://overflo.info/>Overflo</a> for reviewing drafts of this post and making great suggestions. ðŸ™</p></div><hr><div style=float:right></div><div style=clear:both></div><div style=text-align:center><a href=https://buttondown.com/metachris target=_blank rel="noopener noreferrer">Subscribe</a>
&nbsp;&#183;&nbsp;
<a href=https://www.metachris.dev/about>About</a>
&nbsp;&#183;&nbsp;
<a href=https://bsky.app/profile/metachris.bsky.social title="Follow me on Bluesky" target=_blank rel="noopener noreferrer">Bsky</a>
&nbsp;&#183;&nbsp;
<a href=https://x.com/metachris/ title="Follow me on X" target=_blank rel="noopener noreferrer">X</a>
&nbsp;&#183;&nbsp;
<a href=https://www.metachris.dev/index.xml>RSS</a></div><div class=bottom-post-links><div class=prev><span class=title>PREVIOUS POST</span><br><a href=https://www.metachris.dev/2025/10/how-to-query-github-for-user-contributions-in-a-specific-timeframe/>How to Query GitHub for User Contributions in a Specific Timeframe</a></div><div class=next><span class=title>NEXT POST</span><br><a href=https://www.metachris.dev/2026/01/2025-year-in-review/>2025 - Year in review</a></div></div><hr><footer><a id=comments></a><h2>Comments</h2><script src=https://utteranc.es/client.js repo=metachris/metachris.dev-comments issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script></footer></article></section></div><footer class=footer><section class=container></section></footer></main><script src=https://www.metachris.dev/js/dark-mode.min.6948493aa1da5fe4e63b34961a67cde1361353b72c9e2d61f024a34872147559.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=5434b4c9-8ffe-4321-ad55-33012bbb5e73></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168016633-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-168016633-1")</script></body></html>